(function(){$.dialog=function(n){function q(b,c){if(h)return e;var d=$(a.con+" ."+a.contentCls);if(null==b)return d;d.append($("<div></div>",{"class":a.barCls}).html(b));null!=c&&0<c&&d.find("."+a.barCls).css({"padding-top":c+"px","padding-bottom":c+"px"});return e}function r(b){if(h)return e;o++;var c={name:"\u786e\u5b9a",cls:a.buttonCls,id:"",events:p};"function"==typeof b?c.events=b:"string"==typeof b?c.name=b:"object"==typeof b&&(c=$.extend(c,b));b={"class":a.buttonCls+"_"+o+" "+c.cls};""!=c.id&&
(b.id=c.id);$(a.con).find("."+a.bottomCls).append($("<a></a>",b).html(c.name)).find("."+a.buttonCls+"_"+o).click(c.events);return e}function p(){if(h)return e;$(a.con+", #"+a.bg).hide();return e}function s(){$(a.con+" input, "+a.con+" textarea").removeAttr("disabled");h=!1;return e}function g(b,c){var d=!1;if(1<b)d=c?b:b+"px";else if(0<b){d=0;if("width"==c||"left"==c)d=$(a.con).parent().width();else if("height"==c||"top"==c)d=$(a.con).parent().height();d=c?b*d:100*b+"%"}else 0===b&&(d=c?void 0:"auto");
return d}var e={init:function(){var b=$("<div></div>",{"class":a.titleCls});b.append($("<label></label>"));b.append($("<a></a>"));var c=$("<div></div>",{"class":a.contentCls}),d=$("<div></div>",{"class":a.bottomCls});d.append($("<div></div>",{"class":a.tipCls}));$(a.con).css({position:a.fix?"fixed":"absolute",display:"none","z-index":10001,top:g(a.top),left:g(a.left),width:g(a.width),height:g(a.height)}).addClass(a.holderCls).html(b).append(c).append(d).find("."+a.titleCls+" a").click(p);$("body").append($("<div></div>",
{id:a.bg}).css("z-index","10000"));b=0-0.5*$(a.con).width()+"px";$(a.con).css("margin-left",b);if(a.drag){var k=!1,i=0,f=0,j=0,l=0,m=$(a.con);m.find("."+a.titleCls).css("cursor","move").mouseup(function(){k=!1;l=j=0;m.removeClass(a.unselectCls)}).mousedown(function(b){k=!0;i=b.pageX;f=b.pageY;j=m.css("left").split("px")[0]-0;l=m.css("top").split("px")[0]-0;m.addClass(a.unselectCls)});$("body").mousemove(function(a){h||(k&&m.css({left:a.pageX-i+j+"px",top:a.pageY-f+l+"px"}),a.originalEvent.preventDefault())})}return e},
title:function(b){if(h)return e;$(a.con).find("."+a.titleCls+" label").html(b);return e},content:q,input:function(b,c,d){if(h)return e;var g=function(){var a=$(this).parent().find("label");""!=$(this).val()?a.hide():a.show()},i="msie"===$.browser,f="",j="";"object"==typeof c&&$.each(c,function(a,b){f+=a+'="'+b+'"'});if(i){if(null!=b||""!=b){j="";null!=c.value&&""!=c.value&&(j="display: none;");var l=$("<label></label>",{"for":c.id,style:j}).html(b)}null==c.value&&(c.value="");j=d?l+"<textarea "+f+
" >"+c.value+"</textarea>":l+"<input "+f+" />";$(a.con+" ."+a.contentCls).delegate("input, textarea","focus, keyup",g).find("input, textarea").focus()}else{if(null!=b||""!=b)f+="placeholder="+b;null==c.value&&(c.value="");j=d?"<textarea "+f+">"+c.value+"</textarea>":"<input "+f+" >"}q(j);b=$(a.con+" ."+a.contentCls).children().last();i&&(c=b.css("padding").split("px")[0]-0,i=10+c,c=10+c,b.find("label").css({top:i+"px",left:c+"px"}));b.find(d?"textarea":"input").keydown(function(b){b.which==13&&$(a.con).find("."+
a.buttonCls).last().trigger("click")},d);return e},tip:function(b){if(h)return e;if(null==b)return $(a.con).find("."+a.bottomCls).find("."+a.tipCls);$(a.con).find("."+a.bottomCls).find("."+a.tipCls).html(b);return e},button:r,show:function(){if(h)return e;0==o&&r();var b=$(a.con).show(),c=$("#"+a.bg).show();a.bgClose&&c.click(p);b.find("."+a.contentCls).find("textarea, input").focus();return e},hide:p,clear:function(){if(h)return e;$(a.con).find("."+a.titleCls+" label").empty();$(a.con).find("."+
a.contentCls).empty();$("."+a.bottomCls).empty();return e},lock:function(){$(a.con+" input, "+a.con+" textarea").attr("disabled","disabled");h=!0;return e},unlock:s,size:function(b,c,d,k,i,f){if(h)return e;$.isArray(b)&&(c=b[1],d=b[2],k=b[3],i=b[4],f=b[5],b=b[0]);a.width=null==b?a.width:b;a.height=null==c?a.height:c;a.top=null==d?a.top:d;a.left=null==k?a.left:k;null==f&&(f=s);null==i?($(a.con).css({width:g(a.width),height:g(a.height),top:g(a.top),left:g(a.left)}),f.call(this)):(0==a.height&&(_temp=
$(a.con).clone().appendTo($(a.con).parent()).css("height","auto"),a.height=_temp.height(),_temp.detach()),$(a.con).animate({width:g(a.width,"width"),height:g(a.height,"height"),top:g(a.top,"top"),left:g(a.left,"left")},i,f));return e}},a={con:"#dialog",bg:"background",holderCls:"dialog",titleCls:"dialog-title",contentCls:"dialog-content",barCls:"dialog-bar",bottomCls:"dialog-bottom",buttonCls:"dialog-button",tipCls:"dialog-tip",unselectCls:"unselect",bgClose:!0,drag:!0,fix:!0,width:360,height:0,top:150,
left:0.5},o=0,h=!1;switch(typeof n){case "number":a.top=n;break;case "string":a.con=n;break;case "object":a=$.extend(a,n)}return e}})();
