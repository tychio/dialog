(function(){$.dialog=function(h){function m(b,d){if(j)return e;var c=$(a.con+" ."+a.contentCls);if(null==b)return c;c.append($("<div></div>",{"class":a.barCls}).html(b));null!=d&&0<d&&c.find("."+a.barCls).css({"padding-top":d+"px","padding-bottom":d+"px"});return e}function n(b,d){if(j)return e;i++;var c={name:"\u786e\u5b9a",cls:a.buttonCls,id:"",events:l};"function"==typeof b?c.events=b:"string"==typeof b?(c.name=b,"function"==typeof d&&(c.events=d)):"object"==typeof b&&(c=$.extend(c,b));var g={"class":a.buttonCls+
"_"+i+" "+c.cls};""!=c.id&&(g.id=c.id);g=$(a.con).find("."+a.bottomCls).append($("<a></a>",g).html(c.name)).find("."+a.buttonCls+"_"+i);"string"==typeof c.events?g.attr("href",c.events):g.click(c.events);return e}function l(){if(j)return e;$(a.con+", ."+a.bgClsCls).hide();return e}function o(){$(a.con+" input, "+a.con+" textarea").removeAttr("disabled");j=!1;return e}function f(b,d){var c=!1;if(1<b)c=d?b:b+"px";else if(0<b){c=0;if("width"==d||"left"==d)c=$(a.con).parent().width();else if("height"==
d||"top"==d)c=$(a.con).parent().height();c=d?b*c:100*b+"%"}else 0===b&&(c=d?void 0:"auto");return c}var e={init:function(){var b=$("<div></div>",{"class":a.titleCls});b.append($("<label></label>"));b.append($("<a></a>").html(a.closeText));var d=$("<div></div>",{"class":a.contentCls}),c=$("<div></div>",{"class":a.bottomCls});c.append($("<div></div>",{"class":a.tipCls}));0==$(a.con).length&&$("body").append($("<div></div>").attr("id",a.con.slice(1)));$(a.con).css({position:a.fix?"fixed":"absolute",
display:"none","z-index":10001,top:f(a.top),left:f(a.left),width:f(a.width),height:f(a.height)}).addClass(a.holderCls).html(b).append(d).append(c).find("."+a.titleCls+" a").click(l);$("body").append($("<div></div>",{"class":a.bgClsCls}).css("z-index","10000"));b=0-0.5*$(a.con).width()+"px";$(a.con).css("margin-left",b);if(a.drag){var g=!1,p=0,q=0,i=0,h=0,k=$(a.con);k.find("."+a.titleCls).css("cursor","move").mouseup(function(){g=!1;h=i=0;k.removeClass(a.unselectCls)}).mousedown(function(b){g=!0;p=
b.pageX;q=b.pageY;i=k.position().left;h=k.position().top;k.addClass(a.unselectCls)});$("body").mousemove(function(b){if(!j){if(g){var c=b.pageY-q+h,d=b.pageX-p+i;a.fix&&(d-=$(window).scrollLeft(),c-=$(window).scrollTop());k.css({left:d+"px",top:c+"px"})}b.originalEvent&&b.originalEvent.preventDefault&&b.originalEvent.preventDefault()}})}return e},title:function(b){if(j)return e;$(a.con).find("."+a.titleCls+" label").html(b);return e},content:m,input:function(a,d,c,g){if(j)return e;"object"!==typeof a&&
(a={id:a});var f="text";"password"==a.id&&(f=a.id);f='<input type="'+f+'">';c&&(f="<textarea></textarea>");c=$(f).attr(a);null!=d&&(c=$("<label></label>",{"for":a.id}).html(d).add(c));m(c);$("#"+a.id).keyup(function(a){a.which==13&&g.call(this)});return e},tip:function(b){if(j)return e;if(null==b)return $(a.con).find("."+a.bottomCls).find("."+a.tipCls);$(a.con).find("."+a.bottomCls).find("."+a.tipCls).html(b);return e},button:n,show:function(){if(j)return e;0==i&&n();var b=$(a.con).show(),d=$("."+
a.bgClsCls).show();a.bgClsClsClose&&d.click(l);b.find("."+a.contentCls).find("textarea, input").focus();return e},hide:l,clear:function(){if(j)return e;$(a.con).find("."+a.titleCls+" label").empty();$(a.con).find("."+a.contentCls).empty();$("."+a.buttonCls).detach();i=0;return e},lock:function(){$(a.con+" input, "+a.con+" textarea").attr("disabled","disabled");j=!0;return e},unlock:o,size:function(b,d,c,g,i,h){if(j)return e;$.isArray(b)&&(d=b[1],c=b[2],g=b[3],i=b[4],h=b[5],b=b[0]);a.width=null==b?
a.width:b;a.height=null==d?a.height:d;a.top=null==c?a.top:c;a.left=null==g?a.left:g;null==h&&(h=o);null==i?($(a.con).css({width:f(a.width),height:f(a.height),top:f(a.top),left:f(a.left)}),h.call(this)):(0==a.height&&(_temp=$(a.con).clone().appendTo($(a.con).parent()).css("height","auto"),a.height=_temp.height(),_temp.detach()),$(a.con).animate({width:f(a.width,"width"),height:f(a.height,"height"),top:f(a.top,"top"),left:f(a.left,"left")},i,h));return e}},a={con:"#dialog",bgCls:"dialog-bg",holderCls:"dialog",
titleCls:"dialog-title",contentCls:"dialog-content",barCls:"dialog-bar",bottomCls:"dialog-bottom",buttonCls:"dialog-button",tipCls:"dialog-tip",unselectCls:"unselect",closeText:"\u00d7",bgClose:!0,drag:!0,fix:!0,width:360,height:0,top:150,left:0.5},i=0,j=!1;switch(typeof h){case "number":a.top=h;break;case "string":a.con=h;break;case "object":a=$.extend(a,h)}return e}})();
