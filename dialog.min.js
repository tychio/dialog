jQuery.dialog=function(b,r){return function(i){function n(c,e){if(h)return g;var d=b(a.con+" ."+a.contentCls);if(c==null)return d;else{var o=b("<div></div>",{"class":a.barCls}).html(c);typeof e=="number"&&e>0&&(e={"padding-top":e+"px","padding-bottom":e+"px"});e!=null&&o.css(e);d.append(o);return g}}function p(c){return h?g:c==null?b(a.con).find("."+a.bottomCls).find("."+a.tipCls):(b(a.con).find("."+a.bottomCls).find("."+a.tipCls).html(c),g)}function l(){if(h)return g;b(a.con+"_bg, "+a.con).hide();
return g}function q(){b(a.con+" input, "+a.con+" textarea").removeAttr("disabled");h=!1;return g}function f(c,e){var d=!1;if(c>1)d=e?c:c+"px";else if(c>0){d=0;if(e=="width"||e=="left")d=b(a.con).parent().width();else if(e=="height"||e=="top")d=b(a.con).parent().height();d=e?c*d:c*100+"%"}else c===0&&(d=e?r:"auto");return d}function s(){var c=!1,e={x:0,y:0},d={x:0,y:0},g=b(a.con);g.find("."+a.titleCls).css("cursor","move").mouseup(function(){c=!1;d={x:0,y:0};g.removeClass(a.unselectCls)}).mousedown(function(b){c=
!0;e.x=b.pageX;e.y=b.pageY;d.x=g.position().left;d.y=g.position().top;g.addClass(a.unselectCls)});b("body").mousemove(function(f){if(!h){if(c){var k=f.pageY-e.y+d.y,i=f.pageX-e.x+d.x;a.fix&&(i-=b(window).scrollLeft(),k-=b(window).scrollTop());g.css({left:i+"px",top:k+"px"})}f.originalEvent&&f.originalEvent.preventDefault&&f.originalEvent.preventDefault()}})}var g={init:function(){var c=b("<div></div>",{"class":a.titleCls});c.append(b("<label></label>"));c.append(b("<a></a>").html(a.closeText));var e=
b("<div></div>",{"class":a.contentCls}),d=b("<div></div>",{"class":a.bottomCls});d.append(b("<div></div>",{"class":a.tipCls}));b(a.con).length==0&&b("body").append(b("<div></div>").attr("id",a.con.slice(1)));b(a.con).css({position:a.fix?"fixed":"absolute",display:"none","z-index":"10001",top:f(a.top),left:f(a.left),width:f(a.width),height:f(a.height)}).addClass(a.holderCls).html(c).append(e).append(d).find("."+a.titleCls+" a").click(l);a.bgCls&&b(a.con+"_bg").length==0&&b("body").append(b("<div></div>",
{"class":a.bgCls,id:a.con.slice(1)+"_bg"}).css("z-index","10000"));c=0-b(a.con).width()*0.5+"px";b(a.con).css("margin-left",c);a.drag&&s();return g},title:function(c){if(h)return g;if(typeof c==="undefined")return b(a.con).find("."+a.titleCls+" label").html();b(a.con).find("."+a.titleCls+" label").html(c);return g},content:n,input:function(a,e,d,f){if(h)return g;typeof a!=="object"&&(a={id:a});var j="text";if(a.inputtype=="password")j=a.inputtype,delete a.inputtype;j='<input type="'+j+'">';d&&(j=
"<textarea></textarea>");d=b(j).attr(a);e!=null&&(d=b("<label></label>",{"for":a.id}).html(e).add(d));n(d);typeof f!=="undefined"&&d.not("label").keyup(function(a){(a.which||a.keyCode)==13&&f.call(this,a)});return g},tip:p,button:function(c,e){if(h)return g;m++;var d={name:"\u786e\u5b9a",cls:a.buttonCls,id:"",events:l};if(typeof c=="function")d.events=c;else if(typeof c=="string"){if(d.name=c,typeof e=="function")d.events=e}else typeof c=="object"&&(d=b.extend(d,c));var f={"class":a.buttonCls+" "+
a.buttonCls+"_"+m+" "+d.cls};if(d.id!="")f.id=d.id;f=b(a.con).find("."+a.bottomCls).append(b("<a></a>",f).html(d.name)).find("."+a.buttonCls+"_"+m);typeof d.events=="string"?f.attr("href",d.events):f.click(d.events);return g},show:function(){if(h)return g;var c=b(a.con).show(),e=b(a.con+"_bg").show();a.bgClsClose&&e.click(l);c.find("."+a.contentCls).find("textarea, input").focus();return g},hide:l,clear:function(){if(h)return g;b(a.con).find("."+a.titleCls+" label").empty();b(a.con).find("."+a.contentCls).empty();
b(a.con).find("."+a.buttonCls).detach();p("");m=0;return g},lock:function(){b(a.con+" input, "+a.con+" textarea").attr("disabled","disabled");h=!0;return g},unlock:q,size:function(c,e,d,i,j,k){if(h)return g;b.isArray(c)&&(e=c[1],d=c[2],i=c[3],j=c[4],k=c[5],c=c[0]);a.width=c==null?a.width:c;a.height=e==null?a.height:e;a.top=d==null?a.top:d;a.left=i==null?a.left:i;k==null&&(k=q);if(j==null)b(a.con).css({width:f(a.width),height:f(a.height),top:f(a.top),left:f(a.left)}),k.call(this);else{if(a.height==
0)_temp=b(a.con).clone().appendTo(b(a.con).parent()).css("height","auto"),a.height=_temp.css({width:f(a.width,"width"),height:f(a.height,"height"),top:f(a.top,"top"),left:f(a.left,"left")}).outerHeight(!0),_temp.detach();b(a.con).animate({width:f(a.width,"width"),height:f(a.height,"height"),top:f(a.top,"top"),left:f(a.left,"left")},j,k)}return g}},a={con:"#dialog",bgCls:"dialog-bg",holderCls:"dialog",titleCls:"dialog-title",contentCls:"dialog-content",barCls:"dialog-bar",bottomCls:"dialog-bottom",
buttonCls:"dialog-button",tipCls:"dialog-tip",unselectCls:"unselect",closeText:"\u00d7",bgClose:!0,drag:!0,fix:!0,width:360,height:0,top:150,left:0.5},m=0,h=!1;switch(typeof i){case "number":a.top=i;break;case "string":a.con=i;break;case "object":a=b.extend(a,i)}return g}}(jQuery);
